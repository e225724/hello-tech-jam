// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Reviewer {
  id             Int             @id @default(autoincrement())
  shop_id        String
  reviewer       String          @db.Text
  role           Int
  rating         Int
  reviewer_id    Int             @unique
  detailReviewer DetailReviewer? @relation("ReviewerToDetailReviewer")

  @@map("reviewers")
}

model DetailReviewer {
  id                Int      @id @default(autoincrement())
  reviewer_id       Int      @unique
  detailed_reviewer_1 Int
  detailed_reviewer_2 Int
  reviewer          Reviewer @relation("ReviewerToDetailReviewer", fields: [reviewer_id], references: [id], onDelete: Cascade)

  @@map("detail_reviewers")
}
